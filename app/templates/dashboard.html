{% extends "base.html" %}
{% block content %}

<div class="container-fluid">

  <!-- Business Header -->
  <div class="text-center mb-4">
    <h2 class="text-success fw-bold">{{ user.business_name }} - Dashboard</h2>
    <p class="text-muted mb-0">
      <small>{{ user.business_type }} -  {{ user.sector }}</small>
    </p>
    <p class="text-muted small">Overview of your carbon footprint and activities</p>
  </div>

  <!-- Dashboard Cards -->
  <div class="row g-4">

    <!-- Monthly Emission -->
    <div class="col-md-3">
      <div class="card shadow-sm border-0 dashboard-card h-100">
        <div class="card-body text-center">
          <i class="fas fa-calendar-alt fa-2x text-success mb-2"></i>
          <h6 class="card-title">Monthly Emission</h6>
          <p class="card-text fs-5 fw-bold text-dark">
            {{monthly_emission | round(2)}} / {{ monthly_limit}} t COâ‚‚
          </p>
          {% if show_monthly_warning %}
          <p class="text-warning small mt-2"><i class="fas fa-exclamation-circle"></i> Above monthly average</p>
        {% endif %}
        </div>
      </div>
    </div>

    <!-- Yearly Emission -->
    <div class="col-md-3">
      <div class="card shadow-sm border-0 dashboard-card h-100">
        <div class="card-body text-center">
          <i class="fas fa-cloud fa-2x text-primary mb-2"></i>
          <h6 class="card-title">Yearly Emission</h6>
          <p class="card-text fs-5 fw-bold text-dark">
            {{ yearly_emission | round(2)}} t COâ‚‚
        </p>
        </div>
      </div>
    </div>

    <!-- Government Limit -->
    <div class="col-md-3">
      <div class="card shadow-sm border-0 dashboard-card h-100">
        <div class="card-body text-center">
          <i class="fas fa-balance-scale fa-2x text-warning mb-2"></i>
          <h6 class="card-title">Govt. Limit</h6>
          <p class="card-text fs-5 fw-bold text-dark">
            {{ carbon_limit }} t COâ‚‚ / year
          </p>
        </div>
      </div>
    </div>

    <!-- Current Status -->
    <div class="col-md-3">
      <div class="card shadow-sm border-0 dashboard-card h-100">
        <div class="card-body text-center">
          <i class="fas fa-thermometer-half fa-2x text-danger mb-2"></i>
          <h6 class="card-title">Current Status</h6>
          <span class="badge bg-{{ status_class }} fs-6 px-3 py-2">
            {{ status }}
          </span>
        </div>
      </div>
    </div>

  </div>
</div>



<!-- --------------------------------------------------------------------------------------------------------------------------------- -->











<!-- --------------------------------------------------------------------------------------------------------------------------------- -->
<div class="container my-4">
  <!-- Time Filter -->
  

  <!-- Progress Card -->
  <div class="card shadow-sm border-0 mb-4">

    <div class="text-end m-3">
      <a href="{{ url_for('main.dashboard', filter='monthly') }}" class="btn btn-outline-primary btn-sm {% if filter_type == 'monthly' %}active{% endif %}">
        This Month
      </a>
      <a href="{{ url_for('main.dashboard', filter='yearly') }}" class="btn btn-outline-primary btn-sm {% if filter_type == 'yearly' %}active{% endif %}">
        This Year
      </a>
    </div>

    <div class="card-body">
      <h5 class="card-title text-muted">Emission Usage</h5>
      <p class="mb-1 fw-bold text-dark">
        {{ emission_value }} / {{ emission_limit }} kg COâ‚‚ used
      </p>
      <div class="progress" style="height: 30px;">
        <div class="progress-bar 
            {% if percent_used < 50 %}bg-success
            {% elif percent_used < 90 %}bg-warning
            {% else %}bg-danger{% endif %}"
            role="progressbar"
            style="width: {{ percent_used }}%;"
            aria-valuenow="{{ percent_used }}"
            aria-valuemin="0"
            aria-valuemax="100">
          {{ percent_used }}%
        </div>
      </div>
      <div class="mt-3 small text-muted">
        {% if percent_used < 50 %}
          ðŸŸ¢ You're within safe limits.
        {% elif percent_used < 90 %}
          ðŸŸ  Getting close to your limit.
        {% else %}
          ðŸ”´ Emissions exceeded! Consider reducing activity.
        {% endif %}
      </div>
    </div>
  </div>
</div>


<!-- ---------------------------------------------------------------------------------------------------- -->



{% endblock %}
